(this["webpackJsonp@set/mobile"]=this["webpackJsonp@set/mobile"]||[]).push([[0],{62:function(e,t,n){},63:function(e,t,n){"use strict";n.r(t),n.d(t,"postActionsMiddleware",(function(){return Ne}));var c=n(7),r=n(10),i=n(36),a=n(25),o=n(19),s=n(0),u=Object(s.g)(r.g([Object(s.k)(i.a,o.a((function(e){return e.id})))]),r.d,a.b((function(e){return e.id})),a.a((function(){return 0}),s.j)),d=function(e,t){return Object(s.k)(e,r.b((function(e){return e.id!==t})))},l=n(20),m=Object(l.b)({name:"timeStamps",initialState:[],reducers:{add:function(e,t){return n=e,i=t.payload,Object(s.k)(n,r.a(Object(c.a)(Object(c.a)({},i),{},{id:u(n)})));var n,i},assignPlayer:function(e,t){return n=e,i=t.payload,Object(s.k)(n,r.f(Object(s.k)(n,r.c((function(e){return e.id===i.id})),a.a((function(){return-1}),(function(e){return e}))),(function(e){return Object(c.a)(Object(c.a)({},e),i)})),a.a((function(){return n}),(function(e){return e})));var n,i},reset:function(e,t){return n=e,c=t.payload.id,d(n,c);var n,c}}}),b=m.actions,j=b.add,f=b.reset,x=b.assignPlayer,h=m.reducer,p=n(38),O=n(8),g=n(23),v=n(1),y=n.n(v),N=n(2),w={addDigit:function(e){return function(t){return t.concat(e)}},back:function(e){return e.slice(0,-1)},reset:function(e){return""}},k=[{char:"1",changeNumber:w.addDigit("1")},{char:"2",changeNumber:w.addDigit("2")},{char:"3",changeNumber:w.addDigit("3")},{char:"4",changeNumber:w.addDigit("4")},{char:"5",changeNumber:w.addDigit("5")},{char:"6",changeNumber:w.addDigit("6")},{char:"7",changeNumber:w.addDigit("7")},{char:"8",changeNumber:w.addDigit("8")},{char:"9",changeNumber:w.addDigit("9")},{char:"\u21ba",changeNumber:w.reset,alwaysEnabled:!0},{char:"0",changeNumber:w.addDigit("0")},{char:"\u2190",changeNumber:w.back,alwaysEnabled:!0}],S=function(e){var t=e.char,n=e.padClick,c=e.enabled,r=e.alwaysEnabled;return Object(N.jsx)("button",{onClick:n,disabled:!r&&!c,className:"disabled:opacity-20 text-2xl transition-opacity rounded-md text-white m-1.5 ",children:t})},C=function(e){return Object(N.jsx)("div",{className:"grid h-2/5 self-center w-5/6 grid-cols-3 py-2 grid-rows-4",children:k.map((function(t){return Object(N.jsx)(S,{alwaysEnabled:t.alwaysEnabled,enabled:e.availableDigits.includes(t.char),padClick:function(){return function(t){var n=t.changeNumber(e.number);e.onNumberChange(n)}(t)},char:t.char},t.char)}))})},I=n(34),D=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return e.toLocaleString("en-US",{minimumIntegerDigits:t})},E=function(e){return"".concat(D(e.getHours()),":").concat(D(e.getMinutes()),":").concat(D(e.getSeconds()),".").concat(D(e.getMilliseconds(),3).slice(0,1))},T=function(e,t){return Object(s.k)(t,r.e(String),r.b(I.b(e)),r.e((function(t){return I.a(e.length,t.length)(t)})),r.e(I.a(0,1)),r.b((function(e){return!!e})))},P=n(33),_=function(){return Object(P.b)()},z=P.c,A=function(e){var t=e.playerNumber;return Object(N.jsx)("div",{className:"text-orange-500 h-16 flex text-center justify-center text-4xl font-regular py-2",children:t})},M=function(e){var t=e.player,n=e.onPlayerCheckIn;return Object(N.jsxs)("button",{onClick:function(){return n(t.id)},className:"bg-gradient-to-r from-orange-500 to-red-500 mt-2 flex w-full px-4 py-2 items-center shadow-md rounded-md",children:[Object(N.jsx)("div",{className:"font-bold text-2xl mr-4",children:t.number}),Object(N.jsxs)("div",{children:[t.name," ",t.lastName]})]})},F=function(e){var t,n,i=e.onPlayerCheckIn,a=e.title,o=Object(v.useState)(""),u=Object(g.a)(o,2),d=u[0],l=u[1],m=z((function(e){return e.players})),b=z((function(e){return e.timeStamps})),j=m.map((function(e){return Object(c.a)(Object(c.a)({},e),{},{timeStamp:b.find((function(t){return t.playerId===e.id}))})})).filter((function(e){return void 0===e.timeStamp})),f=j.map((function(e){return e.number})),x=(n=f,""!==(t=d)?Object(s.k)(n,r.b(Object(s.g)(String,I.b(t)))):[]),h=j.filter((function(e){return x.includes(e.number)}));return Object(N.jsxs)("div",{className:"flex h-full flex-col",children:[a&&Object(N.jsx)("h1",{className:"text-2xl text-center py-4",children:a}),Object(N.jsx)("div",{className:"flex-auto flex flex-col-reverse mx-12 overflow-y-auto mt-2 items-stretch h-3/5",children:h.map((function(e){return Object(N.jsx)(M,{onPlayerCheckIn:function(e){i(e),l("")},player:e},e.id)}))}),Object(N.jsx)(A,{playerNumber:d}),Object(N.jsx)(C,{availableDigits:T(d,f),number:d,onNumberChange:l})]})},K=n(17),L=n.n(K),R=n(11),B=function(e){var t=e.playerWithTimeStamp;return Object(N.jsxs)("span",{className:"flex flex-grow h-12",children:[Object(N.jsx)("span",{className:"text-3xl mr-4",children:t.number?D(t.number,3):"- - -"}),Object(N.jsxs)("span",{className:"flex-grow",children:[Object(N.jsx)("div",{className:"text-lg font-semibold ",children:Object(N.jsx)("span",{children:t.timeStamp?E(new Date(t.timeStamp.time)):"- - - - - - -"})}),Object(N.jsxs)("div",{className:"opacity-50 text-sm",children:[t.name," ",t.lastName]})]})]})},W=function(e){var t=e.onClick,n=e.icon;return Object(N.jsx)("button",{onClick:t,className:"w-10 bg-gradient-to-r from-orange-500 to-red-500 flex items-center rounded-md px-2 py-1 self-center text-white",children:Object(N.jsx)(L.a,{path:n,size:1,color:"white"})})},J=function(e){var t=e.onClick,n=e.icon,c=e.contents;return Object(N.jsxs)("button",{onClick:t,className:"w-10 bg-gray-600 flex items-center rounded-md px-2 py-1 self-center text-white",children:[n&&Object(N.jsx)(L.a,{path:n,size:1,color:"white"}),c]})},G=function(e){var t=e.players,n=e.onTimeRecord,c=e.onTimeReset,r=function(e){return function(){return n(e)}};return Object(N.jsx)("div",{className:"px-4 text-white",children:t.map((function(e){return Object(N.jsxs)("div",{className:"py-5 flex items-center",children:[Object(N.jsx)(B,{playerWithTimeStamp:e}),e.timeStamp?Object(N.jsx)(W,{icon:R.d,onClick:(t=e.timeStamp.id,function(){return c(t)})}):Object(N.jsx)(W,{icon:R.c,onClick:r(e.id)}),e.timeStamp&&Object(N.jsxs)(N.Fragment,{children:[Object(N.jsx)("span",{className:"ml-1 bg-gray-600 flex items-center rounded-md px-2 py-1 text-white",children:Object(N.jsx)(L.a,{path:R.n,size:1,color:"white"})}),Object(N.jsx)("span",{className:"ml-1 bg-gray-600 flex items-center rounded-md px-2 py-1 text-white",children:Object(N.jsx)(L.a,{path:R.b,size:1,color:"white"})})]})]},e.number);var t}))})},H=n(45),U=n(43),q=n.n(U),Q=function(e){return Object(H.a)(e).sort((function(e,t){return t.time-e.time}))},V=function(e){var t=e.times,n=e.onAddTime,c=Object(v.useState)(),r=Object(g.a)(c,2),i=r[0],a=r[1],o=q()({bindTo:document.getElementById("module-holder")}).Portal,s=_();return Object(N.jsxs)("div",{className:"px-4",children:[void 0!==i&&Object(N.jsx)(o,{children:Object(N.jsx)("div",{className:"absolute inset-0 h-full w-full bg-gray-800",children:Object(N.jsx)(F,{onPlayerCheckIn:function(e){s(x({playerId:e,id:i})),a(void 0)},title:"Assign time to player"})})}),Object(N.jsx)("div",{className:"flex flex-col mt-2",children:Object(N.jsx)("button",{onClick:n,className:"self-end rounded-md text-center bg-gradient-to-r w-20 flex justify-center from-orange-500 to-red-500 py-2 px-4",children:Object(N.jsx)(K.Icon,{color:"white",size:1,path:R.k})})}),Q(t).map((function(e){var t,n,c;return Object(N.jsxs)("div",{className:"flex py-5 items-center",children:[Object(N.jsx)(B,{playerWithTimeStamp:{timeStamp:e,number:null===(t=e.player)||void 0===t?void 0:t.number,name:null===(n=e.player)||void 0===n?void 0:n.name,lastName:null===(c=e.player)||void 0===c?void 0:c.lastName}}),!e.player&&Object(N.jsx)(W,{onClick:function(){return a(e.id)},icon:R.a}),Object(N.jsx)("span",{className:"ml-1",children:Object(N.jsx)(J,{icon:R.h,onClick:function(){s(f({id:e.id}))}})})]},e.id)}))]})},X=n(55)("wss://wss.set-hub.pyszstudio.pl",{transports:["websocket"]}),Y=[],Z=function(e){return Y.forEach((function(t){return t(e)}))};X.on("connect",(function(){Z("connected")})),X.on("disconnect",(function(e){Z("disconnected")})),X.on("connect_failed",(function(){Z("disconnected")})),X.io.on("error",(function(){Z("error")})),X.io.on("reconnect",(function(e){Z("connected")})),X.io.on("reconnect_error",(function(e){Z("reconnecting")})),X.io.on("reconnect_attempt",(function(e){Z("reconnecting")})),X.io.on("reconnect_failed",(function(){Z("disconnected")}));var $=function(e){var t=e.time;return Object(N.jsx)("div",{className:"w-24 text-xl",children:E(t)})},ee=function(){var e=Object(v.useState)(new Date),t=Object(g.a)(e,2),n=t[0],c=t[1];return Object(v.useEffect)((function(){setInterval((function(){return c(new Date)}),10)}),[]),Object(N.jsx)($,{time:n})},te=function(e){switch(e){case"connected":return R.f;case"disconnected":return R.e;case"error":return R.m;case"reconnecting":return R.g;default:throw new Error("not handled connection state")}},ne=function(e){switch(e){case"connected":return"ON-LINE";case"disconnected":case"error":return"OFF-LINE";case"reconnecting":return"CONNECTING";default:throw new Error("not handled connection state")}},ce=function(e){var t=e.timeKeeperName,n=Object(v.useState)("disconnected"),c=Object(g.a)(n,2),r=c[0],i=c[1];return Object(v.useEffect)((function(){var e,t=(e=i,Y.push(e),function(){Y.splice(Y.indexOf(e),1)});return function(){return t()}}),[]),Object(N.jsxs)("div",{className:"px-5 w-screen flex-shrink-0 flex items-center justify-between bg-gradient-to-r from-orange-500 to-red-500 font-semibold h-10",children:[Object(N.jsx)("span",{children:t}),Object(N.jsx)(ee,{}),Object(N.jsxs)("span",{className:"text-xs flex items-center",children:[Object(N.jsx)("span",{className:"mr-2",children:ne(r)}),Object(N.jsx)(L.a,{path:te(r),size:1})]})]})},re=function(e){var t=e.text,n=e.mode,c=e.icon,r=n===e.chosenMode?"opacity-100":"opacity-20";return Object(N.jsxs)(p.b,{to:"".concat("/sport-event-timer","/").concat(n),className:"".concat(r," transition-opacity w-12 flex flex-col items-center px-4 py-2"),children:[Object(N.jsx)(K.Icon,{color:"white",size:1,path:c}),Object(N.jsx)("p",{className:"text-xs text-white font-semibold",children:t})]})},ie=function(){return Object(N.jsxs)("div",{className:"flex justify-around text-black",children:[Object(N.jsx)(re,{mode:"list",text:"Players",icon:R.j,chosenMode:""}),Object(N.jsx)(re,{mode:"pad",text:"Pad",icon:R.i,chosenMode:""}),Object(N.jsx)(re,{mode:"times",text:"Times",icon:R.l,chosenMode:""})]})};var ae=function(){var e=z((function(e){return e.players})),t=z((function(e){return e.timeStamps})),n=_(),r=e.map((function(e){return Object(c.a)(Object(c.a)({},e),{},{timeStamp:t.find((function(t){return t.playerId===e.id}))})})),i=t.map((function(t){return Object(c.a)(Object(c.a)({},t),{},{player:e.find((function(e){return t.playerId===e.id}))})}));return Object(N.jsx)(p.a,{children:Object(N.jsxs)("div",{className:"flex flex-col overflow-hidden bg-gray-800 h-full w-screen text-white",children:[Object(N.jsx)(ce,{timeKeeperName:"Start"}),Object(N.jsx)("div",{id:"module-holder",className:"relative overflow-hidden flex-col flex-1",children:Object(N.jsx)("div",{className:"h-full flex-1 overflow-y-scroll",children:Object(N.jsxs)(O.c,{children:[Object(N.jsx)(O.a,{exact:!0,path:"".concat("/sport-event-timer","/list"),children:Object(N.jsx)(G,{onTimeRecord:function(e){return n(j({playerId:e,timeKeeperId:0,time:(new Date).getTime()}))},onTimeReset:function(e){return n(f({id:e}))},players:r})}),Object(N.jsx)(O.a,{exact:!0,path:"".concat("/sport-event-timer","/pad"),children:Object(N.jsx)(F,{onPlayerCheckIn:function(e){n(j({playerId:e,timeKeeperId:0,time:(new Date).getTime()}))},title:"Clock in player"})}),Object(N.jsx)(O.a,{exact:!0,path:"".concat("/sport-event-timer","/times"),children:Object(N.jsx)(V,{onAddTime:function(){n(j({timeKeeperId:0,time:(new Date).getTime()}))},times:i})})]})})}),Object(N.jsx)("div",{children:Object(N.jsx)(ie,{})})]})})},oe=n(30),se=n.n(oe),ue=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,64)).then((function(t){var n=t.getCLS,c=t.getFID,r=t.getFCP,i=t.getLCP,a=t.getTTFB;n(e),c(e),r(e),i(e),a(e)}))},de=Object(l.b)({name:"players",initialState:[],reducers:{register:function(e,t){return n=e,i=t.payload,Object(s.k)(n,r.a(Object(c.a)(Object(c.a)({},i),{},{id:u(n)})));var n,i},changeInfo:function(e,t){return n=e,c=t.payload,Object(s.k)(n,r.h(Object(s.k)(n,r.c((function(e){return e.id===c.id})),a.a((function(){return-1}),(function(e){return e}))),c),a.a((function(){return n}),(function(e){return e})));var n,c}}}),le=de.actions,me=(le.register,le.changeInfo,de.reducer),be=Object(l.b)({name:"raceCategories",initialState:[],reducers:{add:function(e,t){return n=e,i=t.payload,Object(s.k)(n,r.a(Object(c.a)(Object(c.a)({},i),{},{id:u(n)})));var n,i},remove:function(e,t){return n=e,c=t.payload.id,d(n,c);var n,c}}}),je=be.actions,fe=(je.add,je.remove,be.reducer),xe=Object(l.b)({name:"timeKeepers",initialState:[],reducers:{add:function(e,t){return n=e,i=t.payload,Object(s.k)(n,r.a(Object(c.a)(Object(c.a)({},i),{},{id:u(n)})));var n,i},remove:function(e,t){return n=e,c=t.payload.id,d(n,c);var n,c}}}),he=xe.actions,pe=(he.add,he.remove,xe.reducer),Oe=n(22),ge=Object(Oe.b)({players:me,timeKeepers:pe,timeStamps:h,raceCategories:fe}),ve=function(e,t){return"REPLACE_STATE"===t.type?t.state:ge(e,t)};Object(l.a)({reducer:ge}),n(62);X.on("receive-action",(function(e){return we.dispatch(Object(c.a)(Object(c.a)({},e),{},{__remote:!0}))})),X.on("receive-state",(function(e){return we.dispatch({type:"REPLACE_STATE",state:e,__remote:!0})}));var ye,Ne=function(e){return function(e){return function(t){!t.__remote&&X.connected&&X.emit("post-action",t),e(t)}}},we=(ye=[Ne],Object(l.a)({reducer:ve,middleware:function(e){return e().concat(ye)}}));se.a.render(Object(N.jsx)(y.a.StrictMode,{children:Object(N.jsx)(P.a,{store:we,children:Object(N.jsx)(ae,{})})}),document.getElementById("root")),ue()}},[[63,1,2]]]);
//# sourceMappingURL=main.93815423.chunk.js.map