(this["webpackJsonp@set/mobile"]=this["webpackJsonp@set/mobile"]||[]).push([[0],{62:function(e,t,n){},63:function(e,t,n){"use strict";n.r(t),n.d(t,"postActionsMiddleware",(function(){return Ce}));var c=n(8),r=n(22),i=n(11),a=n(37),o=n(25),s=n(19),u=n(0),d=Object(u.g)(i.g([Object(u.k)(a.a,s.a((function(e){return e.id})))]),i.d,o.b((function(e){return e.id})),o.a((function(){return 0}),u.j)),l=function(e,t){return Object(u.k)(e,i.b((function(e){return e.id!==t})))},j=n(20),m=Object(j.b)({name:"timeStamps",initialState:[],reducers:{add:function(e,t){return n=e,r=t.payload,Object(u.k)(n,i.a(Object(c.a)(Object(c.a)({},r),{},{id:d(n)})));var n,r},assignPlayer:function(e,t){return n=e,r=t.payload,Object(u.k)(n,i.f(Object(u.k)(n,i.c((function(e){return e.id===r.id})),o.a((function(){return-1}),(function(e){return e}))),(function(e){return Object(c.a)(Object(c.a)({},e),r)})),o.a((function(){return n}),(function(e){return e})));var n,r},reset:function(e,t){return n=e,c=t.payload.id,l(n,c);var n,c}}}),b=m.actions,f=b.add,h=b.reset,x=b.assignPlayer,p=m.reducer,O=n(13),g=n.n(O),v=n(38),y=n(9),N=n(7),w=n(1),k=function(e){var t=e.text,n=e.path,c=e.icon,r=n===e.chosenPath?"opacity-100":"opacity-20";return Object(w.jsxs)(v.b,{to:"".concat("/timer","/").concat(n),className:"".concat(r," transition-opacity w-12 flex flex-col items-center px-4 py-2"),children:[Object(w.jsx)(O.Icon,{color:"white",size:1,path:c}),Object(w.jsx)("p",{className:"text-xs text-white font-semibold",children:t})]})},I=function(){var e=Object(y.f)().pathname.split("/timer")[1].slice(1);return Object(w.jsxs)("div",{className:"flex justify-around text-black",children:[Object(w.jsx)(k,{path:"config",text:"Config",icon:N.h,chosenPath:e}),Object(w.jsx)(k,{path:"list",text:"Players",icon:N.l,chosenPath:e}),Object(w.jsx)(k,{path:"pad",text:"Pad",icon:N.j,chosenPath:e}),Object(w.jsx)(k,{path:"times",text:"Times",icon:N.p,chosenPath:e})]})},C=n(2),S=n.n(C),E=Object(C.createContext)({timeKeeperId:void 0,setTimeKeeperId:function(){}}),T={addDigit:function(e){return function(t){return t.concat(e)}},back:function(e){return e.slice(0,-1)},reset:function(e){return""}},K=[{char:"1",changeNumber:T.addDigit("1")},{char:"2",changeNumber:T.addDigit("2")},{char:"3",changeNumber:T.addDigit("3")},{char:"4",changeNumber:T.addDigit("4")},{char:"5",changeNumber:T.addDigit("5")},{char:"6",changeNumber:T.addDigit("6")},{char:"7",changeNumber:T.addDigit("7")},{char:"8",changeNumber:T.addDigit("8")},{char:"9",changeNumber:T.addDigit("9")},{char:"\u21ba",changeNumber:T.reset,alwaysEnabled:!0},{char:"0",changeNumber:T.addDigit("0")},{char:"\u2190",changeNumber:T.back,alwaysEnabled:!0}],D=function(e){var t=e.char,n=e.padClick,c=e.enabled,r=e.alwaysEnabled;return Object(w.jsx)("button",{onClick:n,disabled:!r&&!c,className:"disabled:opacity-20 text-2xl transition-opacity rounded-md text-white m-1.5 ",children:t})},P=function(e){return Object(w.jsx)("div",{className:"grid h-2/5 self-center w-5/6 grid-cols-3 py-2 grid-rows-4",children:K.map((function(t){return Object(w.jsx)(D,{alwaysEnabled:t.alwaysEnabled,enabled:e.availableDigits.includes(t.char),padClick:function(){return function(t){var n=t.changeNumber(e.number);e.onNumberChange(n)}(t)},char:t.char},t.char)}))})},_=n(34),z=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return e.toLocaleString("en-US",{minimumIntegerDigits:t})},A=function(e){return"".concat(z(e.getHours()),":").concat(z(e.getMinutes()),":").concat(z(e.getSeconds()),".").concat(z(e.getMilliseconds(),3).slice(0,1))},F=function(e,t){return Object(u.k)(t,i.e(String),i.b(_.b(e)),i.e((function(t){return _.a(e.length,t.length)(t)})),i.e(_.a(0,1)),i.b((function(e){return!!e})))},L=n(33),R=function(){return Object(L.b)()},M=L.c,B=function(e){var t=e.playerNumber;return Object(w.jsx)("div",{className:"text-orange-500 h-16 flex text-center justify-center text-4xl font-regular py-2",children:t})},W=function(e){var t=e.player,n=e.onPlayerCheckIn;return Object(w.jsxs)("button",{onClick:function(){return n(t.id)},className:"bg-gradient-to-r from-orange-500 to-red-500 mt-2 flex w-full px-4 py-2 items-center shadow-md rounded-md",children:[Object(w.jsx)("div",{className:"font-bold text-2xl mr-4",children:t.number}),Object(w.jsxs)("div",{children:[t.name," ",t.lastName]})]})},J=function(e){var t,n,a=e.onPlayerCheckIn,o=e.title,s=e.timeKeeperId,d=Object(C.useState)(""),l=Object(r.a)(d,2),j=l[0],m=l[1],b=M((function(e){return e.players})),f=M((function(e){return e.timeStamps})),h=b.map((function(e){return Object(c.a)(Object(c.a)({},e),{},{timeStamp:f.find((function(t){return t.playerId===e.id&&t.timeKeeperId===s}))})})).filter((function(e){return void 0===e.timeStamp})),x=h.map((function(e){return e.number})),p=(n=x,""!==(t=j)?Object(u.k)(n,i.b(Object(u.g)(String,_.b(t)))):[]),O=h.filter((function(e){return p.includes(e.number)}));return Object(w.jsxs)("div",{className:"flex h-full flex-col",children:[o&&Object(w.jsx)("h1",{className:"text-2xl text-center py-4",children:o}),Object(w.jsx)("div",{className:"flex-auto flex flex-col-reverse mx-12 overflow-y-auto mt-2 items-stretch h-3/5",children:O.map((function(e){return Object(w.jsx)(W,{onPlayerCheckIn:function(e){a(e),m("")},player:e},e.id)}))}),Object(w.jsx)(B,{playerNumber:j}),Object(w.jsx)(P,{availableDigits:F(j,x),number:j,onNumberChange:m})]})},q=function(e){var t=e.playerWithTimeStamp;return Object(w.jsxs)("span",{className:"flex flex-grow h-12",children:[Object(w.jsx)("span",{className:"text-3xl mr-4",children:t.number?z(t.number,3):"- - -"}),Object(w.jsxs)("span",{className:"flex-grow",children:[Object(w.jsx)("div",{className:"text-lg font-semibold ",children:Object(w.jsx)("span",{children:t.timeStamp?A(new Date(t.timeStamp.time)):"- - - - - - -"})}),Object(w.jsxs)("div",{className:"opacity-50 text-sm",children:[t.name," ",t.lastName]})]})]})},G=function(e){var t=e.onClick,n=e.icon;return Object(w.jsx)("button",{onClick:t,className:"w-10 bg-gradient-to-r from-orange-500 to-red-500 flex items-center rounded-md px-2 py-1 self-center text-white",children:Object(w.jsx)(g.a,{path:n,size:1,color:"white"})})},H=function(e){var t=e.onClick,n=e.icon,c=e.contents;return Object(w.jsxs)("button",{onClick:t,className:"w-10 bg-gray-600 flex items-center rounded-md px-2 py-1 self-center text-white",children:[n&&Object(w.jsx)(g.a,{path:n,size:1,color:"white"}),c]})},U=function(e){var t=e.players,n=e.onTimeRecord,c=e.onTimeReset,r=function(e){return function(){return n(e)}};return Object(w.jsx)("div",{className:"px-4 text-white",children:t.map((function(e){return Object(w.jsxs)("div",{className:"py-5 flex items-center",children:[Object(w.jsx)(q,{playerWithTimeStamp:e}),e.timeStamp?Object(w.jsx)(G,{icon:N.d,onClick:(t=e.timeStamp.id,function(){return c(t)})}):Object(w.jsx)(G,{icon:N.c,onClick:r(e.id)}),e.timeStamp&&Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)("span",{className:"ml-1 bg-gray-600 flex items-center rounded-md px-2 py-1 text-white",children:Object(w.jsx)(g.a,{path:N.r,size:1,color:"white"})}),Object(w.jsx)("span",{className:"ml-1 bg-gray-600 flex items-center rounded-md px-2 py-1 text-white",children:Object(w.jsx)(g.a,{path:N.b,size:1,color:"white"})})]})]},e.number);var t}))})},Q=n(45),V=n(44),X=n.n(V),Y=function(e){return Object(Q.a)(e).sort((function(e,t){return t.time-e.time}))},Z=function(e){var t=e.times,n=e.onAddTime,c=Object(C.useState)(),i=Object(r.a)(c,2),a=i[0],o=i[1],s=X()({bindTo:document.getElementById("module-holder")}).Portal,u=R();return Object(w.jsxs)("div",{className:"px-4",children:[void 0!==a&&Object(w.jsx)(s,{children:Object(w.jsx)("div",{className:"absolute inset-0 h-full w-full bg-gray-800",children:Object(w.jsx)(J,{onPlayerCheckIn:function(e){u(x({playerId:e,id:a})),o(void 0)},title:"Assign time to player"})})}),Object(w.jsx)("div",{className:"flex flex-col mt-2",children:Object(w.jsx)("button",{onClick:n,className:"self-end rounded-md text-center bg-gradient-to-r w-20 flex justify-center from-orange-500 to-red-500 py-2 px-4",children:Object(w.jsx)(O.Icon,{color:"white",size:1,path:N.m})})}),Y(t).map((function(e){var t,n,c;return Object(w.jsxs)("div",{className:"flex py-5 items-center",children:[Object(w.jsx)(q,{playerWithTimeStamp:{timeStamp:e,number:null===(t=e.player)||void 0===t?void 0:t.number,name:null===(n=e.player)||void 0===n?void 0:n.name,lastName:null===(c=e.player)||void 0===c?void 0:c.lastName}}),!e.player&&Object(w.jsx)(G,{onClick:function(){return o(e.id)},icon:N.a}),Object(w.jsx)("span",{className:"ml-1",children:Object(w.jsx)(H,{icon:N.i,onClick:function(){u(h({id:e.id}))}})})]},e.id)}))]})},$=n(56)("wss://wss.set-hub.pyszstudio.pl",{transports:["websocket"]}),ee=[],te=function(e){return ee.forEach((function(t){return t(e)}))};$.on("connect",(function(){te("connected")})),$.on("disconnect",(function(e){te("disconnected")})),$.on("connect_failed",(function(){te("disconnected")})),$.io.on("error",(function(){te("error")})),$.io.on("reconnect",(function(e){te("connected")})),$.io.on("reconnect_error",(function(e){te("reconnecting")})),$.io.on("reconnect_attempt",(function(e){te("reconnecting")})),$.io.on("reconnect_failed",(function(){te("disconnected")}));var ne=function(e){switch(e){case"start":return N.n;case"checkpoint":return N.o;case"end":return N.k;default:throw new Error("Not handled time keeper type")}},ce=function(e){var t=e.type;return Object(w.jsx)(O.Icon,{size:1,path:ne(t)})},re=function(e){var t=e.time;return Object(w.jsx)("div",{className:"w-24 text-xl",children:A(t)})},ie=function(){var e=Object(C.useState)(new Date),t=Object(r.a)(e,2),n=t[0],c=t[1];return Object(C.useEffect)((function(){setInterval((function(){return c(new Date)}),10)}),[]),Object(w.jsx)(re,{time:n})},ae=function(e){switch(e){case"connected":return N.f;case"disconnected":return N.e;case"error":return N.q;case"reconnecting":return N.g;default:throw new Error("not handled connection state")}},oe=function(e){switch(e){case"connected":return"ON-LINE";case"disconnected":case"error":return"OFF-LINE";case"reconnecting":return"CONNECTING";default:throw new Error("not handled connection state")}},se=function(e){var t=e.timeKeeperName,n=Object(C.useState)("disconnected"),c=Object(r.a)(n,2),i=c[0],a=c[1],o=M((function(e){return e.timeKeepers}));return Object(C.useEffect)((function(){var e,t=(e=a,ee.push(e),function(){ee.splice(ee.indexOf(e),1)});return function(){return t()}}),[]),Object(w.jsx)(E.Consumer,{children:function(e){var n=e.timeKeeperId;return Object(w.jsxs)("div",{className:"px-5 w-screen flex-shrink-0 flex items-center justify-between bg-gradient-to-r from-orange-500 to-red-500 font-semibold h-10",children:[Object(w.jsxs)("span",{className:"flex",children:[void 0!==n&&Object(w.jsx)(ce,{type:o.find((function(e){return e.id===n})).type}),Object(w.jsx)("span",{children:null!==t&&void 0!==t?t:"NO_TIMEKEPER"})]}),Object(w.jsx)(ie,{}),Object(w.jsxs)("span",{className:"text-xs flex items-center",children:[Object(w.jsx)("span",{className:"mr-2",children:oe(i)}),Object(w.jsx)(O.Icon,{path:ae(i),size:1})]})]})}})},ue=function(){var e=M((function(e){return e.timeKeepers}));return Object(w.jsx)(E.Consumer,{children:function(t){var n=t.setTimeKeeperId;return Object(w.jsx)("div",{className:"flex h-full w-full justify-center items-start bg-gray-800 pl-20 flex-col",children:e.map((function(e){return Object(w.jsxs)("button",{onClick:function(){return n(e.id)},className:"flex items-center py-4 px-4 my-2",children:[Object(w.jsx)(ce,{type:e.type}),Object(w.jsx)("span",{className:"ml-4 text-xl",children:e.name})]},e.id)}))})}})};var de=function(){var e,t=M((function(e){return e.players})),n=M((function(e){return e.timeStamps})),i=Object(C.useState)(),a=Object(r.a)(i,2),o=a[0],s=a[1],u=M((function(e){return e.timeKeepers})),d=R(),l=function(e){return t.map((function(t){return Object(c.a)(Object(c.a)({},t),{},{timeStamp:n.find((function(n){return n.playerId===t.id&&n.timeKeeperId===e}))})}))},j=function(e){return n.filter((function(t){return t.timeKeeperId===e})).map((function(e){return Object(c.a)(Object(c.a)({},e),{},{player:t.find((function(t){return e.playerId===t.id}))})}))};return Object(w.jsx)(E.Provider,{value:{timeKeeperId:o,setTimeKeeperId:s},children:Object(w.jsx)(v.a,{children:Object(w.jsxs)("div",{id:"app-holder",className:"flex flex-col overflow-hidden bg-gray-800 h-full w-screen text-white",children:[Object(w.jsx)(se,{timeKeeperName:null===(e=u.find((function(e){return e.id===o})))||void 0===e?void 0:e.name}),Object(w.jsx)("div",{id:"module-holder",className:"relative overflow-hidden flex-col flex-1",children:Object(w.jsx)("div",{className:"h-full flex-1 overflow-y-scroll",children:Object(w.jsx)(E.Consumer,{children:function(e){var t=e.timeKeeperId;return Object(w.jsxs)(y.c,{children:[Object(w.jsx)(y.a,{exact:!0,path:"".concat("/timer","/config"),children:Object(w.jsx)(ue,{})}),void 0!==t&&Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)(y.a,{exact:!0,path:"".concat("/timer","/list"),children:Object(w.jsx)(U,{onTimeRecord:function(e){return d(f({playerId:e,timeKeeperId:t,time:(new Date).getTime()}))},onTimeReset:function(e){return d(h({id:e}))},players:l(t)})}),Object(w.jsx)(y.a,{exact:!0,path:"".concat("/timer","/pad"),children:Object(w.jsx)(J,{onPlayerCheckIn:function(e){d(f({playerId:e,timeKeeperId:t,time:(new Date).getTime()}))},title:"Clock in player",timeKeeperId:o})}),Object(w.jsx)(y.a,{exact:!0,path:"".concat("/timer","/times"),children:Object(w.jsx)(Z,{onAddTime:function(){d(f({timeKeeperId:t,time:(new Date).getTime()}))},times:j(t)})})]})]})}})})}),Object(w.jsx)("div",{children:Object(w.jsx)(I,{})})]})})})},le=n(30),je=n.n(le),me=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,64)).then((function(t){var n=t.getCLS,c=t.getFID,r=t.getFCP,i=t.getLCP,a=t.getTTFB;n(e),c(e),r(e),i(e),a(e)}))},be=Object(j.b)({name:"players",initialState:[],reducers:{register:function(e,t){return n=e,r=t.payload,Object(u.k)(n,i.a(Object(c.a)(Object(c.a)({},r),{},{id:d(n)})));var n,r},changeInfo:function(e,t){return n=e,c=t.payload,Object(u.k)(n,i.h(Object(u.k)(n,i.c((function(e){return e.id===c.id})),o.a((function(){return-1}),(function(e){return e}))),c),o.a((function(){return n}),(function(e){return e})));var n,c}}}),fe=be.actions,he=(fe.register,fe.changeInfo,be.reducer),xe=Object(j.b)({name:"raceCategories",initialState:[],reducers:{add:function(e,t){return n=e,r=t.payload,Object(u.k)(n,i.a(Object(c.a)(Object(c.a)({},r),{},{id:d(n)})));var n,r},remove:function(e,t){return n=e,c=t.payload.id,l(n,c);var n,c}}}),pe=xe.actions,Oe=(pe.add,pe.remove,xe.reducer),ge=Object(j.b)({name:"timeKeepers",initialState:[],reducers:{add:function(e,t){return n=e,r=t.payload,Object(u.k)(n,i.a(Object(c.a)(Object(c.a)({},r),{},{id:d(n)})));var n,r},remove:function(e,t){return n=e,c=t.payload.id,l(n,c);var n,c}}}),ve=ge.actions,ye=(ve.add,ve.remove,ge.reducer),Ne=n(23),we=Object(Ne.b)({players:he,timeKeepers:ye,timeStamps:p,raceCategories:Oe}),ke=function(e,t){return"REPLACE_STATE"===t.type?t.state:we(e,t)};Object(j.a)({reducer:we}),n(62);$.on("receive-action",(function(e){return Se.dispatch(Object(c.a)(Object(c.a)({},e),{},{__remote:!0}))})),$.on("receive-state",(function(e){return Se.dispatch({type:"REPLACE_STATE",state:e,__remote:!0})}));var Ie,Ce=function(e){return function(e){return function(t){!t.__remote&&$.connected&&$.emit("post-action",t),e(t)}}},Se=(Ie=[Ce],Object(j.a)({reducer:ke,middleware:function(e){return e().concat(Ie)}}));je.a.render(Object(w.jsx)(S.a.StrictMode,{children:Object(w.jsx)(L.a,{store:Se,children:Object(w.jsx)(de,{})})}),document.getElementById("root")),me()}},[[63,1,2]]]);
//# sourceMappingURL=main.685f2f48.chunk.js.map