(this["webpackJsonp@set/mobile"]=this["webpackJsonp@set/mobile"]||[]).push([[0],{62:function(e,t,n){},63:function(e,t,n){"use strict";n.r(t),n.d(t,"postActionsMiddleware",(function(){return Ie}));var c=n(8),r=n(20),i=n(11),a=n(37),o=n(25),s=n(19),u=n(0),d=Object(u.g)(i.g([Object(u.k)(a.a,s.a((function(e){return e.id})))]),i.d,o.b((function(e){return e.id})),o.a((function(){return 0}),u.j)),l=function(e,t){return Object(u.k)(e,i.b((function(e){return e.id!==t})))},m=n(21),j=Object(m.b)({name:"timeStamps",initialState:[],reducers:{add:function(e,t){return n=e,r=t.payload,Object(u.k)(n,i.a(Object(c.a)(Object(c.a)({},r),{},{id:d(n)})));var n,r},assignPlayer:function(e,t){return n=e,r=t.payload,Object(u.k)(n,i.f(Object(u.k)(n,i.c((function(e){return e.id===r.id})),o.a((function(){return-1}),(function(e){return e}))),(function(e){return Object(c.a)(Object(c.a)({},e),r)})),o.a((function(){return n}),(function(e){return e})));var n,r},reset:function(e,t){return n=e,c=t.payload.id,l(n,c);var n,c}}}),b=j.actions,f=b.add,p=b.reset,x=b.assignPlayer,h=j.reducer,O=n(2),g=n.n(O),v=Object(O.createContext)({timeKeeperId:void 0,setTimeKeeperId:function(){}}),y=n(39),N=n(9),w=n(1),k={addDigit:function(e){return function(t){return t.concat(e)}},back:function(e){return e.slice(0,-1)},reset:function(e){return""}},C=[{char:"1",changeNumber:k.addDigit("1")},{char:"2",changeNumber:k.addDigit("2")},{char:"3",changeNumber:k.addDigit("3")},{char:"4",changeNumber:k.addDigit("4")},{char:"5",changeNumber:k.addDigit("5")},{char:"6",changeNumber:k.addDigit("6")},{char:"7",changeNumber:k.addDigit("7")},{char:"8",changeNumber:k.addDigit("8")},{char:"9",changeNumber:k.addDigit("9")},{char:"\u21ba",changeNumber:k.reset,alwaysEnabled:!0},{char:"0",changeNumber:k.addDigit("0")},{char:"\u2190",changeNumber:k.back,alwaysEnabled:!0}],I=function(e){var t=e.char,n=e.padClick,c=e.enabled,r=e.alwaysEnabled;return Object(w.jsx)("button",{onClick:n,disabled:!r&&!c,className:"disabled:opacity-20 text-2xl transition-opacity rounded-md text-white m-1.5 ",children:t})},S=function(e){return Object(w.jsx)("div",{className:"grid h-2/5 self-center w-5/6 grid-cols-3 py-2 grid-rows-4",children:C.map((function(t){return Object(w.jsx)(I,{alwaysEnabled:t.alwaysEnabled,enabled:e.availableDigits.includes(t.char),padClick:function(){return function(t){var n=t.changeNumber(e.number);e.onNumberChange(n)}(t)},char:t.char},t.char)}))})},T=n(34),E=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return e.toLocaleString("en-US",{minimumIntegerDigits:t})},K=function(e){return"".concat(E(e.getHours()),":").concat(E(e.getMinutes()),":").concat(E(e.getSeconds()),".").concat(E(e.getMilliseconds(),3).slice(0,1))},D=function(e,t){return Object(u.k)(t,i.e(String),i.b(T.b(e)),i.e((function(t){return T.a(e.length,t.length)(t)})),i.e(T.a(0,1)),i.b((function(e){return!!e})))},P=n(33),_=function(){return Object(P.b)()},z=P.c,A=function(e){var t=e.playerNumber;return Object(w.jsx)("div",{className:"text-orange-500 h-16 flex text-center justify-center text-4xl font-regular py-2",children:t})},F=function(e){var t=e.player,n=e.onPlayerCheckIn;return Object(w.jsxs)("button",{onClick:function(){return n(t.id)},className:"bg-gradient-to-r from-orange-500 to-red-500 mt-2 flex w-full px-4 py-2 items-center shadow-md rounded-md",children:[Object(w.jsx)("div",{className:"font-bold text-2xl mr-4",children:t.number}),Object(w.jsxs)("div",{children:[t.name," ",t.lastName]})]})},M=function(e){var t,n,a=e.onPlayerCheckIn,o=e.title,s=Object(O.useState)(""),d=Object(r.a)(s,2),l=d[0],m=d[1],j=z((function(e){return e.players})),b=z((function(e){return e.timeStamps})),f=j.map((function(e){return Object(c.a)(Object(c.a)({},e),{},{timeStamp:b.find((function(t){return t.playerId===e.id}))})})).filter((function(e){return void 0===e.timeStamp})),p=f.map((function(e){return e.number})),x=(n=p,""!==(t=l)?Object(u.k)(n,i.b(Object(u.g)(String,T.b(t)))):[]),h=f.filter((function(e){return x.includes(e.number)}));return Object(w.jsxs)("div",{className:"flex h-full flex-col",children:[o&&Object(w.jsx)("h1",{className:"text-2xl text-center py-4",children:o}),Object(w.jsx)("div",{className:"flex-auto flex flex-col-reverse mx-12 overflow-y-auto mt-2 items-stretch h-3/5",children:h.map((function(e){return Object(w.jsx)(F,{onPlayerCheckIn:function(e){a(e),m("")},player:e},e.id)}))}),Object(w.jsx)(A,{playerNumber:l}),Object(w.jsx)(S,{availableDigits:D(l,p),number:l,onNumberChange:m})]})},L=n(13),R=n.n(L),B=n(7),W=function(e){var t=e.playerWithTimeStamp;return Object(w.jsxs)("span",{className:"flex flex-grow h-12",children:[Object(w.jsx)("span",{className:"text-3xl mr-4",children:t.number?E(t.number,3):"- - -"}),Object(w.jsxs)("span",{className:"flex-grow",children:[Object(w.jsx)("div",{className:"text-lg font-semibold ",children:Object(w.jsx)("span",{children:t.timeStamp?K(new Date(t.timeStamp.time)):"- - - - - - -"})}),Object(w.jsxs)("div",{className:"opacity-50 text-sm",children:[t.name," ",t.lastName]})]})]})},H=function(e){var t=e.onClick,n=e.icon;return Object(w.jsx)("button",{onClick:t,className:"w-10 bg-gradient-to-r from-orange-500 to-red-500 flex items-center rounded-md px-2 py-1 self-center text-white",children:Object(w.jsx)(R.a,{path:n,size:1,color:"white"})})},J=function(e){var t=e.onClick,n=e.icon,c=e.contents;return Object(w.jsxs)("button",{onClick:t,className:"w-10 bg-gray-600 flex items-center rounded-md px-2 py-1 self-center text-white",children:[n&&Object(w.jsx)(R.a,{path:n,size:1,color:"white"}),c]})},q=function(e){var t=e.players,n=e.onTimeRecord,c=e.onTimeReset,r=function(e){return function(){return n(e)}};return Object(w.jsx)("div",{className:"px-4 text-white",children:t.map((function(e){return Object(w.jsxs)("div",{className:"py-5 flex items-center",children:[Object(w.jsx)(W,{playerWithTimeStamp:e}),e.timeStamp?Object(w.jsx)(H,{icon:B.d,onClick:(t=e.timeStamp.id,function(){return c(t)})}):Object(w.jsx)(H,{icon:B.c,onClick:r(e.id)}),e.timeStamp&&Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)("span",{className:"ml-1 bg-gray-600 flex items-center rounded-md px-2 py-1 text-white",children:Object(w.jsx)(R.a,{path:B.q,size:1,color:"white"})}),Object(w.jsx)("span",{className:"ml-1 bg-gray-600 flex items-center rounded-md px-2 py-1 text-white",children:Object(w.jsx)(R.a,{path:B.b,size:1,color:"white"})})]})]},e.number);var t}))})},G=n(45),U=n(38),Q=n.n(U),V=function(e){return Object(G.a)(e).sort((function(e,t){return t.time-e.time}))},X=function(e){var t=e.times,n=e.onAddTime,c=Object(O.useState)(),i=Object(r.a)(c,2),a=i[0],o=i[1],s=Q()({bindTo:document.getElementById("module-holder")}).Portal,u=_();return Object(w.jsxs)("div",{className:"px-4",children:[void 0!==a&&Object(w.jsx)(s,{children:Object(w.jsx)("div",{className:"absolute inset-0 h-full w-full bg-gray-800",children:Object(w.jsx)(M,{onPlayerCheckIn:function(e){u(x({playerId:e,id:a})),o(void 0)},title:"Assign time to player"})})}),Object(w.jsx)("div",{className:"flex flex-col mt-2",children:Object(w.jsx)("button",{onClick:n,className:"self-end rounded-md text-center bg-gradient-to-r w-20 flex justify-center from-orange-500 to-red-500 py-2 px-4",children:Object(w.jsx)(L.Icon,{color:"white",size:1,path:B.l})})}),V(t).map((function(e){var t,n,c;return Object(w.jsxs)("div",{className:"flex py-5 items-center",children:[Object(w.jsx)(W,{playerWithTimeStamp:{timeStamp:e,number:null===(t=e.player)||void 0===t?void 0:t.number,name:null===(n=e.player)||void 0===n?void 0:n.name,lastName:null===(c=e.player)||void 0===c?void 0:c.lastName}}),!e.player&&Object(w.jsx)(H,{onClick:function(){return o(e.id)},icon:B.a}),Object(w.jsx)("span",{className:"ml-1",children:Object(w.jsx)(J,{icon:B.h,onClick:function(){u(p({id:e.id}))}})})]},e.id)}))]})},Y=n(55)("wss://wss.set-hub.pyszstudio.pl",{transports:["websocket"]}),Z=[],$=function(e){return Z.forEach((function(t){return t(e)}))};Y.on("connect",(function(){$("connected")})),Y.on("disconnect",(function(e){$("disconnected")})),Y.on("connect_failed",(function(){$("disconnected")})),Y.io.on("error",(function(){$("error")})),Y.io.on("reconnect",(function(e){$("connected")})),Y.io.on("reconnect_error",(function(e){$("reconnecting")})),Y.io.on("reconnect_attempt",(function(e){$("reconnecting")})),Y.io.on("reconnect_failed",(function(){$("disconnected")}));var ee=function(e){switch(e){case"start":return B.m;case"checkpoint":return B.n;case"end":return B.j;default:throw new Error("Not handled time keeper type")}},te=function(e){var t=e.type;return Object(w.jsx)(L.Icon,{size:1,path:ee(t)})},ne=function(e){var t=e.timeKeepers,n=e.timeKeeperChosen;return Object(w.jsx)("div",{className:"flex h-full w-full justify-center bg-gray-800 pl-20 flex-col absolute top-0",children:t.map((function(e){return Object(w.jsxs)("span",{onClick:function(){return n(e.id)},className:"flex items-center py-4",children:[Object(w.jsx)(te,{type:e.type}),Object(w.jsx)("span",{className:"ml-4 text-xl",children:e.name})]},e.id)}))})},ce=function(e){var t=e.time;return Object(w.jsx)("div",{className:"w-24 text-xl",children:K(t)})},re=function(){var e=Object(O.useState)(new Date),t=Object(r.a)(e,2),n=t[0],c=t[1];return Object(O.useEffect)((function(){setInterval((function(){return c(new Date)}),10)}),[]),Object(w.jsx)(ce,{time:n})},ie=function(e){switch(e){case"connected":return B.f;case"disconnected":return B.e;case"error":return B.p;case"reconnecting":return B.g;default:throw new Error("not handled connection state")}},ae=function(e){switch(e){case"connected":return"ON-LINE";case"disconnected":case"error":return"OFF-LINE";case"reconnecting":return"CONNECTING";default:throw new Error("not handled connection state")}},oe=function(e){var t=e.timeKeeperName,n=Object(O.useState)("disconnected"),c=Object(r.a)(n,2),i=c[0],a=c[1],o=Object(O.useState)(!1),s=Object(r.a)(o,2),u=s[0],d=s[1],l=Q()({bindTo:document.getElementById("app-holder")}).Portal,m=z((function(e){return e.timeKeepers}));return Object(O.useEffect)((function(){var e,t=(e=a,Z.push(e),function(){Z.splice(Z.indexOf(e),1)});return function(){return t()}}),[]),Object(w.jsx)(v.Consumer,{children:function(e){var n=e.timeKeeperId,c=e.setTimeKeeperId;return Object(w.jsxs)("div",{className:"px-5 w-screen flex-shrink-0 flex items-center justify-between bg-gradient-to-r from-orange-500 to-red-500 font-semibold h-10",children:[u&&Object(w.jsx)(l,{children:Object(w.jsx)(ne,{timeKeepers:m,selectedTimeKeeper:m.find((function(e){return e.id===n})),timeKeeperChosen:function(e){d(!1),c(e)}})}),Object(w.jsxs)("span",{className:"flex",onClick:function(){return d(!0)},children:[void 0!==n&&Object(w.jsx)(te,{type:m.find((function(e){return e.id===n})).type}),Object(w.jsx)("span",{children:null!==t&&void 0!==t?t:"CHOOSE"})]}),Object(w.jsx)(re,{}),Object(w.jsxs)("span",{className:"text-xs flex items-center",children:[Object(w.jsx)("span",{className:"mr-2",children:ae(i)}),Object(w.jsx)(L.Icon,{path:ie(i),size:1})]})]})}})},se=function(e){var t=e.text,n=e.mode,c=e.icon,r=n===e.chosenMode?"opacity-100":"opacity-20";return Object(w.jsxs)(y.b,{to:"".concat("/sport-event-timer","/").concat(n),className:"".concat(r," transition-opacity w-12 flex flex-col items-center px-4 py-2"),children:[Object(w.jsx)(L.Icon,{color:"white",size:1,path:c}),Object(w.jsx)("p",{className:"text-xs text-white font-semibold",children:t})]})},ue=function(){return Object(w.jsxs)("div",{className:"flex justify-around text-black",children:[Object(w.jsx)(se,{mode:"list",text:"Players",icon:B.k,chosenMode:""}),Object(w.jsx)(se,{mode:"pad",text:"Pad",icon:B.i,chosenMode:""}),Object(w.jsx)(se,{mode:"times",text:"Times",icon:B.o,chosenMode:""})]})};var de=function(){var e,t=z((function(e){return e.players})),n=z((function(e){return e.timeStamps})),i=Object(O.useState)(),a=Object(r.a)(i,2),o=a[0],s=a[1],u=z((function(e){return e.timeKeepers})),d=_(),l=function(e){return t.map((function(t){return Object(c.a)(Object(c.a)({},t),{},{timeStamp:n.find((function(n){return n.playerId===t.id&&n.timeKeeperId===e}))})}))},m=function(e){return n.filter((function(t){return t.timeKeeperId===e})).map((function(e){return Object(c.a)(Object(c.a)({},e),{},{player:t.find((function(t){return e.playerId===t.id}))})}))};return Object(w.jsx)(v.Provider,{value:{timeKeeperId:o,setTimeKeeperId:s},children:Object(w.jsx)(y.a,{children:Object(w.jsxs)("div",{id:"app-holder",className:"flex flex-col overflow-hidden bg-gray-800 h-full w-screen text-white",children:[Object(w.jsx)(oe,{timeKeeperName:null===(e=u.find((function(e){return e.id===o})))||void 0===e?void 0:e.name}),Object(w.jsx)("div",{id:"module-holder",className:"relative overflow-hidden flex-col flex-1",children:Object(w.jsx)("div",{className:"h-full flex-1 overflow-y-scroll",children:Object(w.jsx)(v.Consumer,{children:function(e){var t=e.timeKeeperId;return Object(w.jsx)(N.c,{children:void 0!==t&&Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)(N.a,{exact:!0,path:"".concat("/sport-event-timer","/list"),children:Object(w.jsx)(q,{onTimeRecord:function(e){return d(f({playerId:e,timeKeeperId:t,time:(new Date).getTime()}))},onTimeReset:function(e){return d(p({id:e}))},players:l(t)})}),Object(w.jsx)(N.a,{exact:!0,path:"".concat("/sport-event-timer","/pad"),children:Object(w.jsx)(M,{onPlayerCheckIn:function(e){d(f({playerId:e,timeKeeperId:t,time:(new Date).getTime()}))},title:"Clock in player"})}),Object(w.jsx)(N.a,{exact:!0,path:"".concat("/sport-event-timer","/times"),children:Object(w.jsx)(X,{onAddTime:function(){d(f({timeKeeperId:t,time:(new Date).getTime()}))},times:m(t)})})]})})}})})}),Object(w.jsx)("div",{children:Object(w.jsx)(ue,{})})]})})})},le=n(30),me=n.n(le),je=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,64)).then((function(t){var n=t.getCLS,c=t.getFID,r=t.getFCP,i=t.getLCP,a=t.getTTFB;n(e),c(e),r(e),i(e),a(e)}))},be=Object(m.b)({name:"players",initialState:[],reducers:{register:function(e,t){return n=e,r=t.payload,Object(u.k)(n,i.a(Object(c.a)(Object(c.a)({},r),{},{id:d(n)})));var n,r},changeInfo:function(e,t){return n=e,c=t.payload,Object(u.k)(n,i.h(Object(u.k)(n,i.c((function(e){return e.id===c.id})),o.a((function(){return-1}),(function(e){return e}))),c),o.a((function(){return n}),(function(e){return e})));var n,c}}}),fe=be.actions,pe=(fe.register,fe.changeInfo,be.reducer),xe=Object(m.b)({name:"raceCategories",initialState:[],reducers:{add:function(e,t){return n=e,r=t.payload,Object(u.k)(n,i.a(Object(c.a)(Object(c.a)({},r),{},{id:d(n)})));var n,r},remove:function(e,t){return n=e,c=t.payload.id,l(n,c);var n,c}}}),he=xe.actions,Oe=(he.add,he.remove,xe.reducer),ge=Object(m.b)({name:"timeKeepers",initialState:[],reducers:{add:function(e,t){return n=e,r=t.payload,Object(u.k)(n,i.a(Object(c.a)(Object(c.a)({},r),{},{id:d(n)})));var n,r},remove:function(e,t){return n=e,c=t.payload.id,l(n,c);var n,c}}}),ve=ge.actions,ye=(ve.add,ve.remove,ge.reducer),Ne=n(23),we=Object(Ne.b)({players:pe,timeKeepers:ye,timeStamps:h,raceCategories:Oe}),ke=function(e,t){return"REPLACE_STATE"===t.type?t.state:we(e,t)};Object(m.a)({reducer:we}),n(62);Y.on("receive-action",(function(e){return Se.dispatch(Object(c.a)(Object(c.a)({},e),{},{__remote:!0}))})),Y.on("receive-state",(function(e){return Se.dispatch({type:"REPLACE_STATE",state:e,__remote:!0})}));var Ce,Ie=function(e){return function(e){return function(t){!t.__remote&&Y.connected&&Y.emit("post-action",t),e(t)}}},Se=(Ce=[Ie],Object(m.a)({reducer:ke,middleware:function(e){return e().concat(Ce)}}));me.a.render(Object(w.jsx)(g.a.StrictMode,{children:Object(w.jsx)(P.a,{store:Se,children:Object(w.jsx)(de,{})})}),document.getElementById("root")),je()}},[[63,1,2]]]);
//# sourceMappingURL=main.d64489ec.chunk.js.map